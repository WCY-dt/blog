{% if jekyll.environment == 'production' %}
  {% assign sorted_posts = site.posts
    | where: 'series', page.series
    | where: 'draft', false
    | sort: 'series_index'
  %}
{% else %}
  {% assign sorted_posts = site.posts
    | where: 'series', page.series
    | sort: 'series_index'
  %}
{% endif %}
<div class='no-select no-print series-header-wrapper'>
  <p class='series-header__desc'>
    {% if sorted_posts.size == 1 %}
      There is 1 post in series
      <span class='series-header__desc-name'>{{ page.series }}</span>.
    {% else %}
      There are {{ sorted_posts.size }} posts in series
      <span class='series-header__desc-name'>{{ page.series }}</span>.
    {% endif %}
  </p>
  <ul class='series-header__list'>
    {% for post in sorted_posts %}
      {% if post.series_index == page.series_index %}
        <span class='series-header__list-index series-header__list-index--current material-symbols-outlined'>arrow_right_alt</span>
        <a
          href='{{ post.url | relative_url }}'
          class='series-header__list-title series-header__list-title--current'
        >
          {{ post.title }}
        </a>
      {% else %}
        <span class='series-header__list-index'>{{ post.series_index }}</span>
        <a
          href='{{ post.url | relative_url }}'
          class='series-header__list-title'
        >
          {{ post.title }}
        </a>
      {% endif %}
    {% endfor %}
  </ul>
</div>
